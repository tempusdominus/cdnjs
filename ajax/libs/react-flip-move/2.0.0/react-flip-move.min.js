!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],t):"object"==typeof exports?exports.FlipMove=t(require("react"),require("react-dom")):e.FlipMove=t(e.React,e.ReactDOM)}(this,function(e,t){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";e.exports=n(3)},function(e,t){"use strict";function n(e,t){var n="string"==typeof e?parseInt(e):e;return isNaN(n)&&console.error("Invalid prop '"+t+"' supplied to FlipMove. Expected a number, or a string that can easily be resolved to a number (eg. \"100\"). Instead, received '"+e+"'."),n}function r(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];return t.map(n)}function o(e,t){var n=arguments.length<=2||void 0===arguments[2]?"key":arguments[2];return t.filter(function(t){return!e.find(function(e){return e[n]===t[n]})})}function i(e,t){Object.keys(t).forEach(function(n){e.style[n]=t[n]})}function a(){var e={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};if("undefined"==typeof document)return"";var t=document.createElement("fakeelement");for(var n in e)if(void 0!==t.style[n])return e[n]}Object.defineProperty(t,"__esModule",{value:!0}),t.convertToInt=n,t.convertAllToInt=r,t.filterNewItems=o,t.applyStylesToDOMNode=i,t.whichTransitionEvent=a},function(t,n){t.exports=e},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l,u=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){o=!0,i=l}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var c=n(2),d=r(c),y=n(6),m=r(y),h=n(1),v=n(5),g=r(v),b=(0,h.whichTransitionEvent)(),T=(0,g.default)(l=function(e){function t(e){i(this,t);var n=a(this,Object.getPrototypeOf(t).call(this,e));return n.boundingBoxes={},n.parentElement=null,n.parentBox=null,n.doesChildNeedToBeAnimated=n.doesChildNeedToBeAnimated.bind(n),n.state={children:n.props.children},n.remainingAnimations=0,n.childrenToAnimate={elements:[],domNodes:[]},n.originalDomStyles={},n}return s(t,e),p(t,[{key:"componentDidMount",value:function(){this.parentElement=m.default.findDOMNode(this)}},{key:"componentDidUpdate",value:function(e){this.props.children!==e.children&&this.calculateAndAnimateChildren()}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.parentElement.getBoundingClientRect(),r=this.props.children.reduce(function(e,r){if(!r.key)return e;var i=m.default.findDOMNode(t.refs[r.key]),a=i.getBoundingClientRect(),s={top:a.top-n.top,left:a.left-n.left,right:a.right-n.right,bottom:a.bottom-n.bottom};return f({},e,o({},r.key,s))},{});this.boundingBoxes=f({},this.boundingBoxes,r),this.setState({children:this.prepareNextChildren(e.children)})}},{key:"prepareNextChildren",value:function(e){var t=this,n=e.map(function(e){var n=t.state.children.find(function(t){var n=t.key;return n===e.key}),r=!n||n.leaving;return f({},e,{entering:r})}),r=0;return this.state.children.forEach(function(t,o){var i=!e.find(function(e){var n=e.key;return n===t.key});if(i){var a=f({},t,{leaving:!0}),s=o+r;n.splice(s,0,a),r++}}),n}},{key:"calculateAndAnimateChildren",value:function(){var e=this;if(!this.isAnimationDisabled()){if(this.parentBox=this.parentElement.getBoundingClientRect(),this.props.enterLeaveAnimation.leave){var t=this.state.children.filter(function(e){var t=e.leaving;return t});t.forEach(function(t){var n=m.default.findDOMNode(e.refs[t.key]),r=e.boundingBoxes[t.key];e.originalDomStyles[t.key]={position:n.style.position,top:n.style.top,left:n.style.left},n.style.position="absolute",n.style.top=r.top+"px",n.style.left=r.left+"px"})}var n=this.state.children.filter(this.doesChildNeedToBeAnimated);this.domStyles=n.reduce(function(t,n){return t[n.key]=e.computeInitialStyles(n),t},{}),n.forEach(function(t,n){e.addChildToAnimationsList(t),e.animateTransform(t,n)})}}},{key:"computeInitialStyles",value:function(e){var t={transition:"0ms"},n=this.props.enterLeaveAnimation,r=n.enter,o=n.leave;if(e.entering){if(r){var i=this.originalDomStyles[e.key]||{};t=f({},t,r.from,i)}}else if(e.leaving)o&&(t=f({},t,o.from));else{var a=m.default.findDOMNode(this.refs[e.key]),s=this.getPositionDelta(a,e.key),l=u(s,2),p=l[0],c=l[1];t.transform="translate("+p+"px, "+c+"px)"}return t}},{key:"isAnimationDisabled",value:function(){return this.props.disableAnimations||0===this.props.duration&&0===this.props.delay&&0===this.props.staggerDurationBy&&0===this.props.staggerDelayBy}},{key:"doesChildNeedToBeAnimated",value:function(e){if(e.key){if(e.entering&&this.props.enterLeaveAnimation.enter||e.leaving&&this.props.enterLeaveAnimation.leave)return!0;var t=m.default.findDOMNode(this.refs[e.key]),n=this.getPositionDelta(t,e.key),r=u(n,2),o=r[0],i=r[1];return 0!==o||0!==i}}},{key:"addChildToAnimationsList",value:function(e){var t=m.default.findDOMNode(this.refs[e.key]);this.remainingAnimations++,this.childrenToAnimate.elements.push(e),this.childrenToAnimate.domNodes.push(t)}},{key:"animateTransform",value:function(e,t){var n=this,r=m.default.findDOMNode(this.refs[e.key]),o=this.domStyles[e.key];(0,h.applyStylesToDOMNode)(r,o),requestAnimationFrame(function(){requestAnimationFrame(function(){var o={transition:n.createTransitionString(t),transform:"",opacity:""},i=n.props.enterLeaveAnimation,a=i.enter,s=i.leave;e.entering&&a?o=f({},o,a.to):e.leaving&&s&&(o=f({},o,s.to)),(0,h.applyStylesToDOMNode)(r,o)})}),this.props.onStart&&this.props.onStart(e,r);var i=function a(){r.style.transition="",n.triggerFinishHooks(e,r),r.removeEventListener(b,a)};r.addEventListener(b,i)}},{key:"getPositionDelta",value:function(e,t){var n=e.getBoundingClientRect(),r=this.boundingBoxes[t],o={top:n.top-this.parentBox.top,left:n.left-this.parentBox.left};return[r.left-o.left,r.top-o.top]}},{key:"createTransitionString",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?["transform","opacity"]:arguments[1],n=this.props,r=n.duration,o=n.staggerDurationBy,i=n.delay,a=n.staggerDelayBy,s=n.easing;return i+=e*a,r+=e*o,t.map(function(e){return e+" "+r+"ms "+s+" "+i+"ms"}).join(", ")}},{key:"triggerFinishHooks",value:function(e,t){if(this.props.onFinish&&this.props.onFinish(e,t),this.remainingAnimations--,0===this.remainingAnimations)try{"function"==typeof this.props.onFinishAll&&this.props.onFinishAll(this.childrenToAnimate.elements,this.childrenToAnimate.domNodes)}finally{this.childrenToAnimate.elements=[],this.childrenToAnimate.domNodes=[];var n=this.state.children.filter(function(e){var t=e.leaving;return!t}).map(function(e){return e.entering=!1,e});this.originalDomStyles={},this.setState({children:n})}}},{key:"childrenWithRefs",value:function(){return this.state.children.map(function(e){return d.default.cloneElement(e,{ref:e.key})})}},{key:"render",value:function(){return d.default.createElement(this.props.typeName,{className:this.props.className,style:{position:"relative"}},this.childrenWithRefs())}}]),t}(c.Component))||l;t.default=T,e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={elevator:{enter:{from:{transform:"scale(0)",opacity:0},to:{transform:"",opacity:""}},leave:{from:{transform:"scale(1)",opacity:1},to:{transform:"scale(0)",opacity:0}}},fade:{enter:{from:{opacity:0},to:{opacity:""}},leave:{from:{opacity:1},to:{opacity:0}}},accordianVertical:{enter:{from:{transform:"scaleY(0)",transformOrigin:"center top"},to:{transform:"",transformOrigin:"center top"}},leave:{from:{transform:"scaleY(1)",transformOrigin:"center top"},to:{transform:"scaleY(0)",transformOrigin:"center top"}}},accordianHorizontal:{enter:{from:{transform:"scaleX(0)",transformOrigin:"left center"},to:{transform:"",transformOrigin:"left center"}},leave:{from:{transform:"scaleX(1)",transformOrigin:"left center"},to:{transform:"scaleX(0)",transformOrigin:"left center"}}},none:{enter:!1,leave:!1}};t.defaultPreset="elevator",t.disablePreset="none";t.default=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t,n;return n=t=function(t){function n(){return o(this,n),i(this,Object.getPrototypeOf(n).apply(this,arguments))}return a(n,t),f(n,[{key:"convertProps",value:function(e){var t=u({},e),n=["duration","delay","staggerDurationBy","staggerDelayBy"];return n.forEach(function(e){return t[e]=(0,d.convertToInt)(t[e],e)}),t.children=c.default.Children.toArray(this.props.children),t.enterLeaveAnimation=this.convertEnterLeaveAnimation(t.enterLeaveAnimation),t}},{key:"convertEnterLeaveAnimation",value:function(e){var t=void 0;switch("undefined"==typeof e?"undefined":l(e)){case"boolean":t=m.default[e?y.defaultPreset:y.disablePreset];break;case"string":var n=Object.keys(m.default);-1===n.indexOf(e)?(console.error("You supplied an invalid preset name of '"+m.default+"'. The accepted values are: "+n.join(", ")+". Defaulting to "+y.defaultPreset),t=m.default[y.defaultPreset]):t=m.default[e];break;case"object":var r=Object.keys(e),o=-1!==r.indexOf("enter"),i=-1!==r.indexOf("leave");o||i||console.error("Please provide an `enter` or `leave` property when supplying a custom enterLeaveAnimation object."),t=e}return t}},{key:"render",value:function(){return console.log(this.props.enterLeaveAnimation),c.default.createElement(e,this.convertProps(this.props))}}]),n}(p.Component),t.propTypes={children:p.PropTypes.oneOfType([p.PropTypes.array,p.PropTypes.object]).isRequired,easing:p.PropTypes.string,duration:p.PropTypes.oneOfType([p.PropTypes.string,p.PropTypes.number]),delay:p.PropTypes.oneOfType([p.PropTypes.string,p.PropTypes.number]),staggerDurationBy:p.PropTypes.oneOfType([p.PropTypes.string,p.PropTypes.number]),staggerDelayBy:p.PropTypes.oneOfType([p.PropTypes.string,p.PropTypes.number]),onStart:p.PropTypes.func,onFinish:p.PropTypes.func,onFinishAll:p.PropTypes.func,className:p.PropTypes.string,typeName:p.PropTypes.string,disableAnimations:p.PropTypes.bool,enterLeaveAnimation:p.PropTypes.oneOfType([p.PropTypes.string,p.PropTypes.bool,p.PropTypes.object])},t.defaultProps={easing:"ease-in-out",duration:350,delay:0,staggerDurationBy:0,staggerDelayBy:0,typeName:"div",enterLeaveAnimation:y.defaultPreset},n}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var p=n(2),c=r(p),d=n(1),y=n(4),m=r(y);t.default=s,e.exports=t.default},function(e,n){e.exports=t}])});