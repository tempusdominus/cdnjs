// geojson.js - v0.1.0
// (c) 2012 Casey Thomas, MIT License
(function(e){function r(e,t){var n=e||{};for(var r in t)t.hasOwnProperty(r)&&!n[r]&&(n[r]=t[r]);return n}function i(e,t){t.crs&&(e.crs={type:"name",properties:{name:t.crs}}),t.bbox&&(e.bbox=t.bbox)}function s(e){e.geom={};for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)!==-1&&(e.geom[n]=e[n],delete e[n]);o(e.geom)}function o(e){for(var t in e)e.hasOwnProperty(t)&&(typeof e[t]=="string"?n.push(e[t]):typeof e[t]=="object"&&(n.push(e[t][0]),n.push(e[t][1])));if(n.length===0)throw new Error("No geometry attributes specified")}function u(e,t){var n={type:"Feature"};return n.geometry=a(e,t),n.properties=f(e,t),n}function a(e,t){var r={};for(var i in e)if(e.hasOwnProperty(i)&&n.indexOf(i)!==-1)for(var s in t.geom)if(t.geom.hasOwnProperty(s)&&(i===t.geom[s]||i===t.geom[s][0]))return r.type=s,typeof t.geom[s]=="string"?r.coordinates=e[t.geom[s]]:r.coordinates=[e[t.geom[s][1]],e[t.geom[s][0]]],r}function f(e,t){var r={},i;if(!t.exclude&&!t.include)for(i in e)e.hasOwnProperty(i)&&n.indexOf(i)===-1&&(r[i]=e[i]);else if(t.include)t.include.forEach(function(t){r[t]=e[t]});else if(t.exclude)for(i in e)e.hasOwnProperty(i)&&n.indexOf(i)===-1&&t.exclude.indexOf(i)===-1&&(r[i]=e[i]);return t.extra&&l(r,t.extra),r}function l(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}e.version="0.1.0",e.defaults={},e.parse=function(e,t){if(e.length===0)throw new Error("No data found");var o={type:"FeatureCollection",features:[]},a=r(t,this.defaults);return n.length=0,s(a),e.forEach(function(e){o.features.push(u(e,a))}),i(o,a),o};var t=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],n=[]})(typeof module=="object"?module.exports:window.GeoJSON={});