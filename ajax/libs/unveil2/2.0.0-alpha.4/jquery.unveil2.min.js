// unveil2.js - 2.0.0-alpha.3 - https://github.com/nabble/unveil2
!function(a){"use strict";var b="unveil",c=a(),d=!1;a.fn.unveil=function(e){function f(a){return!(!a.width()&&!a.height())&&"none"!==a.css("display")}function g(a){a.addClass(b+"-loading")}function h(a){a.removeClass(b+"-placeholder "+b+"-loading"),a.addClass(b+"-loaded")}function i(){var b=a(this);if(f(b)){var c=m.scrollTop(),d=c+n,e=p!==m?c-p.offset().top:0,g=b.offset().top+e,h=g+b.height();return h>=c-r&&d+r>=g}}function j(){n=m.height(),l()}function k(a){var b=!1;return function(){b||(b=!0,setTimeout(function(){a(),b=!1},t))}}function l(){var a=c.filter(i);a.trigger(b),c=c.not(a),a.length}e=e||{};var m=a(window),n=m.height(),o=window.devicePixelRatio>1,p=e.container||m,q=e.placeholder||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",r=e.offset||0,s=e.breakpoints||[],t=e.throttle||250;e.debug||!1;return s.sort(function(a,b){return b.minWidth-a.minWidth}),this.one(b,function(){var b,c,d,f,i=a(this),j=m.width(),k="src";for(b=0;b<s.length;b++){var n=s[b].attribute.replace(/^data-/,"");if(j>=s[b].minWidth&&i.data(n)){k=n;break}}d=f=i.data(k),d&&-1!==d.indexOf("|")&&(f=d.split("|")[1],d=d.split("|")[0]),d&&(c=o&&f?f:d,g(i),i.prop("src",c),i.one("load",function(){h(i),"function"==typeof e.loaded&&e.loaded.call(this),l()}),this.complete&&h(i))}),this.each(function(){var d=a(this),e=d.data("src-placeholder")||q;c=a(c).add(this),d.data(b)||(d.data(b,!0),d.data("src")||d.data("src",d.prop("src")),d.one("load",function(){a(this).addClass(b+"-placeholder"),l()}).prop("src","").prop("src",e))}),d||(p.on({"resize.unveil":k(j),"scroll.unveil":k(l),"lookup.unveil":l}),d=!0),setTimeout(l,0),this}}(window.jQuery||window.Zepto);