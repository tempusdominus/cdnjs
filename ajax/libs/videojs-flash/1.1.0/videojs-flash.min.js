/*!
 * @name videojs-flash
 * @version 1.1.0
 * @author Brightcove, Inc.
 * @license Apache-2.0
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.videojsFlash=e()}}(function(){return function e(t,n,o){function r(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return r(n||e)},l,l.exports,e,t,n,o)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(e,t,n){(function(e){var n;n="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){t.exports={name:"videojs-swf",description:"The Flash-fallback video player for video.js (http://videojs.com)",version:"5.4.0",copyright:"Copyright 2014 Brightcove, Inc. https://github.com/videojs/video-js-swf/blob/master/LICENSE",keywords:["flash","video","player"],homepage:"http://videojs.com",author:{name:"Brightcove"},repository:{type:"git",url:"git+https://github.com/videojs/video-js-swf.git"},devDependencies:{async:"~0.2.9",chg:"^0.3.2","flex-sdk":"4.6.0-0",grunt:"~0.4.0","grunt-bumpup":"~0.5.0","grunt-cli":"~0.1.0","grunt-connect":"~0.2.0","grunt-contrib-jshint":"~0.4.3","grunt-contrib-qunit":"~0.2.1","grunt-contrib-watch":"~0.1.4","grunt-npm":"~0.0.2","grunt-prompt":"~0.1.2","grunt-shell":"~0.6.1","grunt-tagrelease":"~0.3.1",qunitjs:"~1.12.0","video.js":"^5.9.2"},scripts:{version:"chg release -y && grunt dist && git add -f dist/ && git add CHANGELOG.md"},readme:"The light-weight Flash video player that makes Flash work like HTML5 video. This allows player skins, plugins, and other features to work with both HTML5 and Flash\n\nThis project doesn't need to be used if you simply want to use the Flash video player.  Head back to the main Video.js project if that's all you need, as the compiled SWF is checked in there.\n\n## Installation\n\n1. Install Node Packages.\n```bash\n    npm install\n   ```\n2. Compile SWF.\nDevelopment (places new SWF in /dist/):\n```bash\n    grunt mxmlc\n   ```\nProduction/ Distribution (runs mxmlc task and copies SWF to dist/):\n```bash\n    grunt dist\n   ```\n3. Run Connect Server.\n```bash\n    grunt connect:dev\n```\n4. Open your browser at [http://localhost:8000/index.html](http://localhost:8000/index.html) to see a video play.  You can keep using grunt to rebuild the Flash code.\n\n## Releasing\n\n1. Make sure that the following file is modified with these values:\n\n```\nnode_modules/flex-sdk/lib/flex_sdk/frameworks/flex-config.xml\n```\n\n```xml\n\x3c!-- Specifies the minimum player version that will run the compiled SWF. --\x3e\n<target-player>10.3</target-player>\n\n\x3c!-- Specifies the version of the compiled SWF --\x3e\n<swf-version>12</swf-version>\n```\n\n2. Run the commands:\n```sh\nnpm version {major,minor,patch}\nnpm publish\n```\nThe swf and changelog will be automatically built and added to the repo on version.\n\n## Running Unit and Integration Tests\n\n** Note - We want to drop all of this for grunt based / Karma testing.\n\nFor unit tests, this project uses [FlexUnit](http://flexunit.org/). The unit tests can be found in [project root]/src/com/videojs/test/\n\nFor integration tests, this project uses [qunit](http://qunitjs.com/). The integration tests can be found in [project root]/test\n\nIn order to run all of the tests, use the links at  [http://localhost:8000/index.html](http://localhost:8000/index.html)\n\nThere are very few tests.  Adding to them is a fantastic and much appreciated way to contribute.\n",readmeFilename:"README.md",gitHead:"84e862116d82b4046b985e956ad1eb1fe2f3d4a8",bugs:{url:"https://github.com/videojs/video-js-swf/issues"},_id:"videojs-swf@5.4.0",_shasum:"dfe3d72026acdb83205eca43aab03373a0b80bb2",_from:"videojs-swf@>=5.4.0 <6.0.0"}},{}],3:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){w[e]=function(){return this.el_.vjs_getProperty(e)}}for(var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=(function(e){return e&&"object"===(void 0===e?"undefined":s(e))&&"default"in e?e["default"]:e}("undefined"!=typeof window?window.videojs:void 0!==u?u.videojs:null)),u=e(1),l=c.getComponent("Tech"),d=c.dom,p=c.url,f=c.createTimeRange,h=c.mergeOptions,m=u.window&&u.window.navigator||{},v=function(t){function n(e,i){o(this,n);var a=r(this,t.call(this,e,i));return e.source&&a.ready(function(){this.setSource(e.source)},!0),e.startTime&&a.ready(function(){this.load(),this.play(),this.currentTime(e.startTime)},!0),u.window.videojs=u.window.videojs||{},u.window.videojs.Flash=u.window.videojs.Flash||{},u.window.videojs.Flash.onReady=n.onReady,u.window.videojs.Flash.onEvent=n.onEvent,u.window.videojs.Flash.onError=n.onError,a.on("seeked",function(){this.lastSeekTarget_=undefined}),a}return i(n,t),n.prototype.createEl=function(){var t=this.options_;if(!t.swf){var o=e(2).version;t.swf="//vjs.zencdn.net/swf/"+o+"/video-js.swf"}var r=t.techId,i=h({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:t.autoplay,preload:t.preload,loop:t.loop,muted:t.muted},t.flashVars),a=h({wmode:"opaque",bgcolor:"#000000"},t.params),s=h({id:r,name:r,"class":"vjs-tech"},t.attributes);return this.el_=n.embed(t.swf,i,a,s),this.el_.tech=this,this.el_},n.prototype.play=function(){this.ended()&&this.setCurrentTime(0),this.el_.vjs_play()},n.prototype.pause=function(){this.el_.vjs_pause()},n.prototype.src=function(e){return e===undefined?this.currentSrc():this.setSrc(e)},n.prototype.setSrc=function(e){var t=this;e=p.getAbsoluteURL(e),this.el_.vjs_src(e),this.autoplay()&&this.setTimeout(function(){return t.play()},0)},n.prototype.seeking=function(){return this.lastSeekTarget_!==undefined},n.prototype.setCurrentTime=function(e){var n=this.seekable();n.length&&(e=e>n.start(0)?e:n.start(0),e=e<n.end(n.length-1)?e:n.end(n.length-1),this.lastSeekTarget_=e,this.trigger("seeking"),this.el_.vjs_setProperty("currentTime",e),t.prototype.setCurrentTime.call(this))},n.prototype.currentTime=function(){return this.seeking()?this.lastSeekTarget_||0:this.el_.vjs_getProperty("currentTime")},n.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.vjs_getProperty("currentSrc")},n.prototype.duration=function(){if(0===this.readyState())return NaN;var e=this.el_.vjs_getProperty("duration");return e>=0?e:Infinity},n.prototype.load=function(){this.el_.vjs_load()},n.prototype.poster=function(){this.el_.vjs_getProperty("poster")},n.prototype.setPoster=function(){},n.prototype.seekable=function(){var e=this.duration();return 0===e?f():f(0,e)},n.prototype.buffered=function(){var e=this.el_.vjs_getProperty("buffered");return 0===e.length?f():f(e[0][0],e[0][1])},n.prototype.supportsFullScreen=function(){return!1},n.prototype.enterFullScreen=function(){return!1},n.prototype.getVideoPlaybackQuality=function(){var e=this.el_.vjs_getProperty("getVideoPlaybackQuality");return u.window.performance&&"function"==typeof u.window.performance.now?e.creationTime=u.window.performance.now():u.window.performance&&u.window.performance.timing&&"number"==typeof u.window.performance.timing.navigationStart&&(e.creationTime=u.window.Date.now()-u.window.performance.timing.navigationStart),e},n}(l),y=["rtmpConnection","rtmpStream","preload","defaultPlaybackRate","playbackRate","autoplay","loop","controls","volume","muted","defaultMuted"],g=["networkState","readyState","initialTime","startOffsetTime","paused","ended","videoWidth","videoHeight"],w=v.prototype,b=0;b<y.length;b++)a(y[b]),function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);w["set"+t]=function(t){return this.el_.vjs_setProperty(e,t)}}(y[b]);for(var S=0;S<g.length;S++)a(g[S]);v.isSupported=function(){return v.version()[0]>=10},l.withSourceHandlers(v),v.nativeSourceHandler={},v.nativeSourceHandler.canPlayType=function(e){return e in v.formats?"maybe":""},v.nativeSourceHandler.canHandleSource=function(e,t){var n=void 0;return n=e.type?e.type.replace(/;.*/,"").toLowerCase():function(e){var t=p.getFileExtension(e);return t?"video/"+t:""}(e.src),v.nativeSourceHandler.canPlayType(n)},v.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},v.nativeSourceHandler.dispose=function(){},v.registerSourceHandler(v.nativeSourceHandler),v.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"},v.onReady=function(e){var t=d.$("#"+e),n=t&&t.tech;n&&n.el()&&v.checkReady(n)},v.checkReady=function(e){e.el()&&(e.el().vjs_getProperty?e.triggerReady():this.setTimeout(function(){v.checkReady(e)},50))},v.onEvent=function(e,t){var n=d.$("#"+e).tech,o=Array.prototype.slice.call(arguments,2);n.setTimeout(function(){n.trigger(t,o)},1)},v.onError=function(e,t){var n=d.$("#"+e).tech;if("srcnotfound"===t)return n.error(4);n.error("FLASH: "+t)},v.version=function(){var e="0,0,0";try{e=new u.window.ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(t){try{m.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(e=(m.plugins["Shockwave Flash 2.0"]||m.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1])}catch(n){}}return e.split(",")},v.embed=function(e,t,n,o){var r=v.getEmbedCode(e,t,n,o);return d.createEl("div",{innerHTML:r}).childNodes[0]},v.getEmbedCode=function(e,t,n,o){var r="",i="",a="";return t&&Object.getOwnPropertyNames(t).forEach(function(e){r+=e+"="+t[e]+"&amp;"}),n=h({movie:e,flashvars:r,allowScriptAccess:"always",allowNetworking:"all"},n),Object.getOwnPropertyNames(n).forEach(function(e){i+='<param name="'+e+'" value="'+n[e]+'" />'}),o=h({data:e,width:"100%",height:"100%"},o),Object.getOwnPropertyNames(o).forEach(function(e){a+=e+'="'+o[e]+'" '}),'<object type="application/x-shockwave-flash" '+a+">"+i+"</object>"},function(e){e.streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"},e.streamFromParts=function(e,t){return e+"&"+t},e.streamToParts=function(e){var t={connection:"",stream:""};if(!e)return t;var n=e.search(/&(?!\w+=)/),o=void 0;return-1!==n?o=n+1:0===(n=o=e.lastIndexOf("/")+1)&&(n=o=e.length),t.connection=e.substring(0,n),t.stream=e.substring(o,e.length),t},e.isStreamingType=function(t){return t in e.streamingFormats},e.RTMP_RE=/^rtmp[set]?:\/\//i,e.isStreamingSrc=function(t){return e.RTMP_RE.test(t)},e.rtmpSourceHandler={},e.rtmpSourceHandler.canPlayType=function(t){return e.isStreamingType(t)?"maybe":""},e.rtmpSourceHandler.canHandleSource=function(t,n){var o=e.rtmpSourceHandler.canPlayType(t.type);return o||(e.isStreamingSrc(t.src)?"maybe":"")},e.rtmpSourceHandler.handleSource=function(t,n,o){var r=e.streamToParts(t.src);n.setRtmpConnection(r.connection),n.setRtmpStream(r.stream)},e.registerSourceHandler(e.rtmpSourceHandler)}(v),l.getTech("Flash")?(c.log.warn("Not using videojs-flash as it appears to already be registered"),c.log.warn("videojs-flash should only be used with video.js@6 and above")):c.registerTech("Flash",v),t.exports=v},{1:1,2:2}]},{},[3])(3)});
